function preventSubmitBeforeJSLoaded(e){event.preventDefault(),alert("Please wait until the web fully loaded.")}function addEventListenerByClass(e,a,n){for(var l=document.getElementsByClassName(e),t=0,o=l.length;t<o;t++)l[t].addEventListener(a,n,!1)}function removeEventListenerByClass(e,a,n){for(var l=document.getElementsByClassName(e),t=0,o=l.length;t<o;t++)l[t].removeEventListener(a,n,!1)}function hideOverlayScreen(){$("html, body").css("overflow","inherit"),$("#popup-panel").fadeOut("fast")}function loadOverlayScreen(e){$(":focus").blur(),$("html, body").css("overflow","hidden"),$("#popup-panel").fadeIn("fast"),e.url&&$("#popup-panel").load(e.url),$("#popup-panel").on("click",function(e){$(e.target).hasClass("content-panel")||$(e.target).closest(".content-panel").length||hideOverlayScreen()})}function createImageUploader(e,a,n){var l=$("."+e.name);void 0!=a.token&&""!=a.token||(a.token=Math.floor(1e3*Math.random()+1).toString()+$.now()),l.append('<input type="hidden" name="'+e.name+'" />'),l.append('<input type="hidden" name="token-'+e.name+'" value="'+a.token+'" />');var t=e.btnLabel?e.btnLabel:"Upload File";new qq.FileUploader({element:l.find(".file-uploader")[0],action:"/fileuploader.php?action=upload&folder="+a.folder+"&token="+a.token,allowedExtensions:["jpg","jpeg","png","gif","ico"],template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">'+t+'</div><ul class="qq-upload-list"></ul></div>',onComplete:function(l,t,o){1==o.success&&pushImageThumb(e,{folder:a.folder,token:a.token,fileName:o.fileName,phpThumbHash:o.phpThumbHash},n)}});return a.token}function pushImageThumb(e,a,n){var l=PHP_CONFIG.uploadTempDocShort,t=$("."+e.name);0==n&&t.find(".image-list").html("");var o=a.fileName.substr(a.fileName.lastIndexOf(".")+1);fileurl="../phpthumb/phpThumb.php?src="+l+a.folder+a.token+"/"+a.fileName+"&w=150&h=150&far=C&hash="+a.phpThumbHash,"ico"==o&&(fileurl=PHP_CONFIG.uploadTempURL+a.folder+a.token+"/"+a.fileName);var i='<li relfilename="'+a.fileName+'" relPHPThumbHash="'+a.phpThumbHash+'">';i+='<div class="file-uploader-image"><img src="'+fileurl+'"/></div>',i+="</li>",t.find(".image-list").append(i),updateItemImageArray(e,a.token),t.find(".image-list li:last img").on("load",function(){$(this).closest(".file-uploader-image").css("background-image","none")})}function updateItemImageArray(e,a){var n=$("."+e.name);uploadedImage[a]=Array(),n.find(".image-list li").each(function(e){uploadedImage[a].push($(this).attr("relfilename"))}),n.find("[name="+e.name+"]").val(uploadedImage[a])}function loadSubMenuProfile(){$(".subsec-profile").hover(function(){$(this).find(".profile-sub-menu").fadeIn("fast")},function(){$(this).find(".profile-sub-menu").fadeOut("fast")})}var uploadedImage={};addEventListenerByClass("prevent-form-submit","submit",preventSubmitBeforeJSLoaded);