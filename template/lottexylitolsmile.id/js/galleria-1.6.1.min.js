!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.Galleria=e(t,t.jQuery)}(window,function(t,e,i,o){var n=t.document,s=e(n),a=e(t),r=e,l=Array.prototype,c=1.61,d=!0,u=3e4,h=!1,p=navigator.userAgent.toLowerCase(),f=t.location.hash.replace(/#\//,""),g="file:"==t.location.protocol?"http:":t.location.protocol,m=Math,v=function(){},y=function(){return!1},w=!(t.screen.width>1279&&1==t.devicePixelRatio||t.screen.width>1e3&&t.innerWidth<.9*t.screen.width),b=function(){var t=3,e=n.createElement("div"),i=e.getElementsByTagName("i");do e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(i[0]);return t>4?t:n.documentMode||o}(),T=function(){return{html:n.documentElement,body:n.body,head:n.getElementsByTagName("head")[0],title:n.title}},k=t.parent!==t.self,x="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",S=function(){var t=[];return e.each(x.split(" "),function(e,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),_=function(t){var i;return"object"!=typeof t?t:(e.each(t,function(o,n){/^[a-z]+_/.test(o)&&(i="",e.each(o.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),t[i]=n,delete t[o])}),t)},$=function(t){return e.inArray(t,S)>-1?i[t.toUpperCase()]:t},C={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return g+"//www.youtube.com/embed/"+this.id},get_thumb:function(){return g+"//img.youtube.com/vi/"+this.id+"/default.jpg"},get_image:function(){return g+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg"}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return g+"//player.vimeo.com/video/"+this.id},getUrl:function(){return g+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return g+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},A=function(i,o){for(var n=0;n<C._inst.length;n++)if(C._inst[n].id===o&&C._inst[n].type==i)return C._inst[n];this.type=i,this.id=o,this.readys=[],C._inst.push(this);var s=this;e.extend(this,C[i]),_videoThumbs=function(t){s.data=t,e.each(s.readys,function(t,e){e(s.data)}),s.readys=[]},this.hasOwnProperty("getUrl")?e.getJSON(this.getUrl(),_videoThumbs):t.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||v;var o=this,n=function(i){e(o["get_"+t](i))};try{o.data?n(o.data):o.readys.push(n)}catch(s){i()}}},I=function(t){var e;for(var i in C)if(e=t&&C[i].reg&&t.match(C[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},z={support:function(){var t=T().html;return!k&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:v,enter:function(t,e,i){this.instance=t,this.callback=e||v,i=i||T().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||v,n.exitFullscreen?n.exitFullscreen():n.msExitFullscreen?n.msExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen&&n.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(z.instance){var t=z.instance._fullscreen;n.fullscreen||n.mozFullScreen||n.webkitIsFullScreen||n.msFullscreenElement&&null!==n.msFullscreenElement?t._enter(z.callback):t._exit(z.callback)}};n.addEventListener("fullscreenchange",t,!1),n.addEventListener("MSFullscreenChange",t,!1),n.addEventListener("mozfullscreenchange",t,!1),n.addEventListener("webkitfullscreenchange",t,!1)}}},O=[],P=[],E=!1,H=!1,L=[],D=[],M=function(t){D.push(t),e.each(L,function(e,i){(i._options.theme==t.name||!i._initialized&&!i._options.theme)&&(i.theme=t,i._init.call(i))})},F=function(){return{clearTimer:function(t){e.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){e.each(i.get(),function(){this.addTimer(t)})},array:function(t){return l.slice.call(t,0)},create:function(t,e){e=e||"div";var i=n.createElement(e);return i.className=t,i},removeFromArray:function(t,i){return e.each(t,function(e,o){return o==i?(t.splice(e,1),!1):void 0}),t},getScriptPath:function(t){t=t||e("script:last").attr("src");var i=t.split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:function(){var o,s,a,r,l,c,d,u=function(e){var i,o="transition WebkitTransition MozTransition OTransition".split(" ");if(t.opera)return!1;for(i=0;o[i];i++)if("undefined"!=typeof e[o[i]])return o[i];return!1}((n.body||n.documentElement).style),h={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[u],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(t,i,o){var n={};o=o||"transition",e.each("webkit moz ms o".split(" "),function(){n["-"+this+"-"+o]=i}),t.css(n)},g=function(t){f(t,"none","transition"),i.WEBKIT&&i.TOUCH&&(f(t,"translate3d(0,0,0)","transform"),t.data("revert")&&(t.css(t.data("revert")),t.data("revert",null)))};return function(n,m,y){return y=e.extend({duration:400,complete:v,stop:!1},y),n=e(n),y.duration?u?(y.stop&&(n.off(h),g(n)),o=!1,e.each(m,function(t,e){d=n.css(t),F.parseValue(d)!=F.parseValue(e)&&(o=!0),n.css(t,d)}),o?(s=[],a=y.easing in p?p[y.easing]:p._default,r=" "+y.duration+"ms cubic-bezier("+a.join(",")+")",void t.setTimeout(function(t,o,n,a){return function(){t.one(o,function(t){return function(){g(t),y.complete.call(t[0])}}(t)),i.WEBKIT&&i.TOUCH&&(l={},c=[0,0,0],e.each(["left","top"],function(e,i){i in n&&(c[e]=F.parseValue(n[i])-F.parseValue(t.css(i))+"px",l[i]=n[i],delete n[i])}),(c[0]||c[1])&&(t.data("revert",l),s.push("-webkit-transform"+a),f(t,"translate3d("+c.join(",")+")","transform"))),e.each(n,function(t){s.push(t+a)}),f(t,s.join(",")),t.css(n)}}(n,h,m,r),2)):void t.setTimeout(function(){y.complete.call(n[0])},y.duration)):void n.animate(m,y):(n.css(m),void y.complete.call(n[0]))}}(),removeAlpha:function(t){if(t instanceof r&&(t=t[0]),9>b&&t){var e=t.style,i=t.currentStyle,o=i&&i.filter||e.filter||"";/alpha/.test(o)&&(e.filter=o.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each(F.array(arguments),function(t,i){i=e(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(t){F.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){F.revertStyles.apply(F,F.array(arguments))},hide:function(t,i,o){o=o||v;var n=e(t);t=n[0],n.data("opacity")||n.data("opacity",n.css("opacity"));var s={opacity:0};if(i){var a=9>b&&t?function(){F.removeAlpha(t),t.style.visibility="hidden",o.call(t)}:o;F.animate(t,s,{duration:i,complete:a,stop:!0})}else 9>b&&t?(F.removeAlpha(t),t.style.visibility="hidden"):n.css(s)},show:function(t,i,o){o=o||v;var n=e(t);t=n[0];var s=parseFloat(n.data("opacity"))||1,a={opacity:s};if(i){9>b&&(n.css("opacity",0),t.style.visibility="visible");var r=9>b&&t?function(){1==a.opacity&&F.removeAlpha(t),o.call(t)}:o;F.animate(t,a,{duration:i,complete:r,stop:!0})}else 9>b&&1==a.opacity&&t?(F.removeAlpha(t),t.style.visibility="visible"):n.css(a)},wait:function(o){i._waiters=i._waiters||[],o=e.extend({until:y,success:v,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},o);var n,s,a,r=F.timestamp(),l=function(){return s=F.timestamp(),n=s-r,F.removeFromArray(i._waiters,a),o.until(n)?(o.success(),!1):"number"==typeof o.timeout&&s>=r+o.timeout?(o.error(),!1):void i._waiters.push(a=t.setTimeout(l,10))};i._waiters.push(a=t.setTimeout(l,10))},toggleQuality:function(t,e){7!==b&&8!==b||!t||"IMG"!=t.nodeName.toUpperCase()||("undefined"==typeof e&&(e="nearest-neighbor"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){if(!i||!e("#"+i).length){var o=n.createElement("style");if(i&&(o.id=i),T().head.appendChild(o),o.styleSheet)o.styleSheet.cssText=t;else{var s=n.createTextNode(t);o.appendChild(s)}}},loadScript:function(t,i){var o=!1,n=e("<script>").attr({src:t,async:!0}).get(0);n.onload=n.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,n.onload=n.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},T().head.appendChild(n)},parseValue:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?1*e.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,s,a){var r,l;if(e("link[rel=stylesheet]").each(function(){return new RegExp(t).test(this.href)?(r=this,!1):void 0}),"function"==typeof s&&(a=s,s=o),a=a||v,r)return a.call(r,r),r;if(l=n.styleSheets.length,e("#"+s).length)e("#"+s).attr("href",t),l--;else{r=e("<link>").attr({rel:"stylesheet",href:t,id:s}).get(0);var c=e('link[rel="stylesheet"], style');if(c.length?c.get(0).parentNode.insertBefore(r,c[0]):T().head.appendChild(r),b&&l>=31)return void i.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof a){var d=e("<s>").attr("id","galleria-loader").hide().appendTo(T().body);F.wait({until:function(){return d.height()>0},success:function(){d.remove(),a.call(r,r)},error:function(){d.remove(),i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme."),!0)},timeout:5e3})}return r}}}(),j=function(t){var i=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";return F.insertStyleTag(i,"galleria-videoicon"),e(F.create("galleria-videoicon")).html("<i></i>").appendTo(t).click(function(){e(this).siblings("img").mouseup()})},N=function(){var t=function(t,i,o,n){var s=this.getOptions("easing"),a=this.getStageWidth(),r={left:a*(t.rewind?-1:1)},l={left:0};o?(r.opacity=0,l.opacity=1):r.opacity=1,e(t.next).css(r),F.animate(t.next,l,{duration:t.speed,complete:function(t){return function(){i(),t.css({left:0})}}(e(t.next).add(t.prev)),queue:!1,easing:s}),n&&(t.rewind=!t.rewind),t.prev&&(r={left:0},l={left:a*(t.rewind?1:-1)},o&&(r.opacity=1,l.opacity=0),e(t.prev).css(r),F.animate(t.prev,l,{duration:t.speed,queue:!1,easing:s,complete:function(){e(this).css("opacity",0)}}))};return{active:!1,init:function(t,e,i){N.effects.hasOwnProperty(t)&&N.effects[t].call(this,e,i)},effects:{fade:function(t,i){e(t.next).css({opacity:0,left:0}),F.animate(t.next,{opacity:1},{duration:t.speed,complete:i}),t.prev&&(e(t.prev).css("opacity",1).show(),F.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){e(t.next).css({opacity:0,left:0}),t.prev?F.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){F.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):F.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css({opacity:0,left:0}).show(),F.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){t.apply(this,F.array(arguments))},fadeslide:function(){t.apply(this,F.array(arguments).concat([!0]))},doorslide:function(){t.apply(this,F.array(arguments).concat([!1,!0]))}}}}();return z.listen(),e.event.special["click:fast"]={propagate:!0,add:function(i){var o=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},n={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};e(this).data({clickstate:n,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(e(this).data("timer")),e(this).data("clickstate",{touched:!0,touchdown:!0,coords:o(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var i=o(t.originalEvent),n=e(this).data("clickstate"),s=Math.max(Math.abs(n.coords.x-i.x),Math.abs(n.coords.y-i.y));s>6&&e(this).data("clickstate",e.extend(n,{touchdown:!1}))}).on("touchend.fast",function(o){var s=e(this),a=s.data("clickstate");a.touchdown&&i.handler.call(this,o),s.data("timer",t.setTimeout(function(){s.data("clickstate",n)},400))}).on("click.fast",function(t){var o=e(this).data("clickstate");return o.touched?!1:(e(this).data("clickstate",n),void i.handler.call(this,t))})},remove:function(){e(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},a.on("orientationchange",function(){e(this).resize()}),i=function(){var r=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=o,this._binds=[],this._id=parseInt(1e4*m.random(),10);var l="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",c="current total";e.each(l.split(" "),function(t,e){r._dom[e]=F.create("galleria-"+e)}),e.each(c.split(" "),function(t,e){r._dom[e]=F.create("galleria-"+e,"span")});var d=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in d.map&&"function"==typeof d.map[e]&&d.map[e].call(r,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in d.keys?d.map[d.keys[i]]=t[e]:d.map[i]=t[e]);d.bound||(d.bound=!0,s.on("keydown",d.press))},detach:function(){d.bound=!1,d.map={},s.off("keydown",d.press)}},u=this._controls={0:o,1:o,active:0,swap:function(){u.active=u.active?0:1},getActive:function(){return r._options.swipe?u.slides[r._active]:u[u.active]},getNext:function(){return r._options.swipe?u.slides[r.getNext(r._active)]:u[1-u.active]},slides:[],frames:[],layers:[]},h=this._carousel={next:r.$("thumb-nav-right"),prev:r.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,o=[0];e.each(r._thumbnails,function(n,s){if(s.ready){t+=s.outerWidth||e(s.container).outerWidth(!0);var a=e(s.container).width();t+=a-m.floor(a),o[n+1]=t,i=m.max(i,s.outerHeight||e(s.container).outerHeight(!0))}}),r.$("thumbnails").css({width:t,height:i}),h.max=t,h.hooks=o,h.width=r.$("thumbnails-list").width(),h.setClasses(),r.$("thumbnails-container").toggleClass("galleria-carousel",t>h.width),h.width=r.$("thumbnails-list").width()},bindControls:function(){var t;h.next.on("click:fast",function(e){if(e.preventDefault(),"auto"===r._options.carouselSteps){for(t=h.current;t<h.hooks.length;t++)if(h.hooks[t]-h.hooks[h.current]>h.width){h.set(t-2);break}}else h.set(h.current+r._options.carouselSteps)}),h.prev.on("click:fast",function(e){if(e.preventDefault(),"auto"===r._options.carouselSteps)for(t=h.current;t>=0;t--){if(h.hooks[h.current]-h.hooks[t]>h.width){h.set(t+2);break}if(0===t){h.set(0);break}}else h.set(h.current-r._options.carouselSteps)})},set:function(t){for(t=m.max(t,0);h.hooks[t-1]+h.width>=h.max&&t>=0;)t--;h.current=t,h.animate()},getLast:function(t){return(t||h.current)-1},follow:function(t){if(0===t||t===h.hooks.length-2)return void h.set(t);for(var e=h.current;h.hooks[e]-h.hooks[h.current]<h.width&&e<=h.hooks.length;)e++;t-1<h.current?h.set(t-1):t+2>e&&h.set(t-e+h.current+2)},setClasses:function(){h.prev.toggleClass("disabled",!h.current),h.next.toggleClass("disabled",h.hooks[h.current]+h.width>=h.max)},animate:function(){h.setClasses();var t=-1*h.hooks[h.current];isNaN(t)||(r.$("thumbnails").css("left",function(){return e(this).css("left")}),F.animate(r.get("thumbnails"),{left:t},{duration:r._options.carouselSpeed,easing:r._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+r._id,swapTimer:"swap"+r._id,init:function(){f.initialized=!0;var t=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";F.insertStyleTag(t,"galleria-tooltip"),r.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=r.getMousePosition(t).x,i=r.getMousePosition(t).y,o=r.$("tooltip"),n=e,s=i,a=o.outerHeight(!0)+1,l=o.outerWidth(!0),c=a+15,d=r.$("container").width()-l-2,u=r.$("container").height()-a-2;isNaN(n)||isNaN(s)||(n+=10,s-=a+8,n=m.max(0,m.min(d,n)),s=m.max(0,m.min(u,s)),c>i&&(s=c),o.css({left:n,top:s}))},bind:function(t,o){if(!i.TOUCH){f.initialized||f.init();var n=function(){r.$("container").off("mousemove",f.move),r.clearTimer(f.timer),r.$("tooltip").stop().animate({opacity:0},200,function(){r.$("tooltip").hide(),r.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},s=function(t,i){f.define(t,i),e(t).hover(function(){r.clearTimer(f.swapTimer),r.$("container").off("mousemove",f.move).on("mousemove",f.move).trigger("mousemove"),f.show(t),r.addTimer(f.timer,function(){r.$("tooltip").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},n).click(n)};"string"==typeof o?s(t in r._dom?r.get(t):t,o):e.each(t,function(t,e){s(r.get(t),e)})}},show:function(i){i=e(i in r._dom?r.get(i):i);var o=i.data("tt"),n=function(e){t.setTimeout(function(t){return function(){f.move(t)}}(e),10),i.off("mouseup",n)};o="function"==typeof o?o():o,o&&(r.$("tooltip").html(o.replace(/\s/,"&#160;")),i.on("mouseup",n))},define:function(t,i){if("function"!=typeof i){var o=i;i=function(){return o}}t=e(t in r._dom?r.get(t):t).data("tt",i),f.show(t)}},g=this._fullscreen={scrolled:0,crop:o,active:!1,prev:e(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:r._keyboard.map,parseCallback:function(t,i){return N.active?function(){"function"==typeof t&&t.call(r);var o=r._controls.getActive(),n=r._controls.getNext();r._scaleImage(n),r._scaleImage(o),i&&r._options.trueFullscreen&&e(o.container).add(n.container).trigger("transitionend")}:t},enter:function(e){g.beforeEnter(function(){e=g.parseCallback(e,!0),r._options.trueFullscreen&&z.support?(g.active=!0,F.forceStyles(r.get("container"),{width:"100%",height:"100%"}),r.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(p)?(r.$("stage").css("opacity",0),t.setTimeout(function(){g.scale(),r.$("stage").css("opacity",1)},4)):(r.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){g.scale(),r.$("container").css("opacity",1)},50)):r.$("container").addClass("fullscreen"),a.resize(g.scale),z.enter(r,e,r.get("container"))):(g.scrolled=a.scrollTop(),i.TOUCH||t.scrollTo(0,0),g._enter(e))})},_enter:function(s){g.active=!0,k&&(g.iframe=function(){var o,s=n.referrer,a=n.createElement("a"),r=t.location;return a.href=s,a.protocol!=r.protocol||a.hostname!=r.hostname||a.port!=r.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(g.pd=t.parent.document,e(g.pd).find("iframe").each(function(){var t=this.contentDocument||this.contentWindow.document;return t===n?(o=this,!1):void 0}),o)}()),F.hide(r.getActiveImage()),k&&g.iframe&&(g.iframe.scrolled=e(t.parent).scrollTop(),t.parent.scrollTo(0,0));var l=r.getData(),c=r._options,d=!r._options.trueFullscreen||!z.support,u={height:"100%",overflow:"hidden",margin:0,padding:0};if(d&&(r.$("container").addClass("fullscreen"),g.prev=r.$("container").prev(),g.prev.length||(g.parent=r.$("container").parent()),r.$("container").appendTo("body"),F.forceStyles(r.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),F.forceStyles(T().html,u),F.forceStyles(T().body,u)),k&&g.iframe&&(F.forceStyles(g.pd.documentElement,u),F.forceStyles(g.pd.body,u),F.forceStyles(g.iframe,e.extend(u,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),g.keymap=e.extend({},r._keyboard.map),r.attachKeyboard({escape:r.exitFullscreen,right:r.next,left:r.prev}),g.crop=c.imageCrop,c.fullscreenCrop!=o&&(c.imageCrop=c.fullscreenCrop),l&&l.big&&l.image!==l.big){var h=new i.Picture,p=h.isCached(l.big),f=r.getIndex(),m=r._thumbnails[f];r.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:r.getActiveImage(),thumbTarget:m,galleriaData:l}),h.load(l.big,function(t){r._scaleImage(t,{complete:function(t){r.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:t.image,thumbTarget:m});var o=r._controls.getActive().image;o&&(e(o).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")),t.image.src.srcset&&e(o).attr("srcset",t.image.src.srcset),t.image.src.sizes&&e(o).attr("sizes",t.image.src.sizes),e(o).attr("src",t.image.src))}})});var v=r.getNext(f),y=new i.Picture,w=r.getData(v);y.preload(r.isFullscreen()&&w.big?w.big:w.image)}r.rescale(function(){r.addTimer(!1,function(){d&&F.show(r.getActiveImage()),"function"==typeof s&&s.call(r),r.rescale()},100),r.trigger(i.FULLSCREEN_ENTER)}),d?a.resize(g.scale):F.show(r.getActiveImage())},scale:function(){r.rescale()},exit:function(t){g.beforeExit(function(){t=g.parseCallback(t),r._options.trueFullscreen&&z.support?z.exit(t):g._exit(t)})},_exit:function(e){g.active=!1;var o=!r._options.trueFullscreen||!z.support,n=r.$("container").removeClass("fullscreen");if(g.parent?g.parent.prepend(n):n.insertAfter(g.prev),o){F.hide(r.getActiveImage()),F.revertStyles(r.get("container"),T().html,T().body),i.TOUCH||t.scrollTo(0,g.scrolled);var s=r._controls.frames[r._controls.active];s&&s.image&&(s.image.src=s.image.src)}k&&g.iframe&&(F.revertStyles(g.pd.documentElement,g.pd.body,g.iframe),g.iframe.scrolled&&t.parent.scrollTo(0,g.iframe.scrolled)),r.detachKeyboard(),r.attachKeyboard(g.keymap),r._options.imageCrop=g.crop;var l=r.getData().big,c=r._controls.getActive().image;!r.getData().iframe&&c&&l&&l==c.src&&t.setTimeout(function(t){return function(){c.src=t}}(r.getData().image),1),r.rescale(function(){r.addTimer(!1,function(){o&&F.show(r.getActiveImage()),"function"==typeof e&&e.call(r),a.trigger("resize")},50),r.trigger(i.FULLSCREEN_EXIT)}),a.off("resize",g.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(t,o,n,s){if(t&&!i.TOUCH){v.bound||v.addEvent(),t=e(t),"boolean"==typeof n&&(s=n,n={}),n=n||{};var a,r={};for(a in o)o.hasOwnProperty(a)&&(r[a]=t.css(a));t.data("idle",{from:e.extend(r,n),to:o,complete:!0,busy:!1}),s?t.css(o):v.addTimer(),v.trunk.push(t)}},remove:function(t){t=e(t),e.each(v.trunk,function(e,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),v.trunk.splice(e,1))}),v.trunk.length||(v.removeEvent(),r.clearTimer(v.timer))},addEvent:function(){v.bound=!0,r.$("container").on("mousemove click",v.showAll),"hover"==r._options.idleMode&&r.$("container").on("mouseleave",v.hide)},removeEvent:function(){v.bound=!1,r.$("container").on("mousemove click",v.showAll),"hover"==r._options.idleMode&&r.$("container").off("mouseleave",v.hide)},addTimer:function(){"hover"!=r._options.idleMode&&r.addTimer("idle",function(){v.hide()},r._options.idleTime)},hide:function(){if(r._options.idleMode&&r.getIndex()!==!1){r.trigger(i.IDLE_ENTER);var t=v.trunk.length;e.each(v.trunk,function(e,i){var o=i.data("idle");o&&(i.data("idle").complete=!1,F.animate(i,o.to,{duration:r._options.idleSpeed,complete:function(){e==t-1&&(v.active=!1)}}))})}},showAll:function(){r.clearTimer("idle"),e.each(v.trunk,function(t,e){v.show(e)})},show:function(t){var o=t.data("idle");v.active&&(o.busy||o.complete)||(o.busy=!0,r.trigger(i.IDLE_EXIT),r.clearTimer("idle"),F.animate(t,o.from,{duration:r._options.idleSpeed/2,complete:function(){v.active=!0,e(t).data("idle").busy=!1,e(t).data("idle").complete=!0}})),v.addTimer()}},y=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!y.initialized){y.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",o={},n=r._options,s="",a="position:absolute;",l="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+n.overlayOpacity+";filter:alpha(opacity="+100*n.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+n.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:a+"background:#000;width:100%;height:100%;",content:a+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:a+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:a+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:a+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:a+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:a+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:a+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:a+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},d=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},u={},h="";h=b>7?9>b?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",c.nextholder+=h,c.prevholder+=h,e.each(c,function(t,e){s+=".galleria-"+l+t+"{"+e+"}"}),s+=".galleria-"+l+"box.iframe .galleria-"+l+"prevholder,.galleria-"+l+"box.iframe .galleria-"+l+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",F.insertStyleTag(s,"galleria-lightbox"),e.each(t.split(" "),function(t,e){r.addElement("lightbox-"+e),o[e]=y.elems[e]=r.get("lightbox-"+e)}),y.image=new i.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var o=[];e.each(i.split(" "),function(t,e){o.push(l+e)}),u[l+t]=o}),r.append(u),e(o.image).append(y.image.container),e(T().body).append(o.overlay,o.box),d(e(o.close).on("click:fast",y.hide).html("&#215;")),e.each(["Prev","Next"],function(t,n){var s=e(o[n.toLowerCase()]).html(/v/.test(n)?"&#8249;&#160;":"&#160;&#8250;"),a=e(o[n.toLowerCase()+"holder"]);return a.on("click:fast",function(){y["show"+n]()}),8>b||i.TOUCH?void s.show():void a.hover(function(){s.show()},function(){s.stop().fadeOut(200)})}),e(o.overlay).on("click:fast",y.hide),i.IPAD&&(r._options.lightboxTransitionSpeed=0)}},rescale:function(t){var o=m.min(a.width()-40,y.width),n=m.min(a.height()-60,y.height),s=m.min(o/y.width,n/y.height),l=m.round(y.width*s)+40,c=m.round(y.height*s)+60,d={width:l,height:c,"margin-top":-1*m.ceil(c/2),"margin-left":-1*m.ceil(l/2)};t?e(y.elems.box).css(d):e(y.elems.box).animate(d,{duration:r._options.lightboxTransitionSpeed,easing:r._options.easing,complete:function(){var t=y.image,o=r._options.lightboxFadeSpeed;r.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),e(t.image).animate({opacity:1},o),F.show(y.elems.info,o)}})},hide:function(){y.image.image=null,a.off("resize",y.rescale),e(y.elems.box).hide().find("iframe").remove(),F.hide(y.elems.info),r.detachKeyboard(),r.attachKeyboard(y.keymap),y.keymap=!1,F.hide(y.elems.overlay,200,function(){e(this).hide().css("opacity",r._options.overlayOpacity),r.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){y.show(r.getNext(y.active))},showPrev:function(){y.show(r.getPrev(y.active))},show:function(o){y.active=o="number"==typeof o?o:r.getIndex()||0,y.initialized||y.init(),r.trigger(i.LIGHTBOX_OPEN),y.keymap||(y.keymap=e.extend({},r._keyboard.map),r.attachKeyboard({escape:y.hide,right:y.showNext,left:y.showPrev})),a.off("resize",y.rescale);var n,s,l,c=r.getData(o),d=r.getDataLength(),u=r.getNext(o);F.hide(y.elems.info);try{for(l=r._options.preload;l>0;l--)s=new i.Picture,n=r.getData(u),s.preload(n.big?n.big:n.image),u=r.getNext(u)}catch(h){}y.image.isIframe=c.iframe&&!c.image,e(y.elems.box).toggleClass("iframe",y.image.isIframe),e(y.image.container).find(".galleria-videoicon").remove(),y.image.load(c.big||c.image||c.iframe,function(i){if(i.isIframe){var n=e(t).width(),s=e(t).height();if(i.video&&r._options.maxVideoSize){var l=m.min(r._options.maxVideoSize/n,r._options.maxVideoSize/s);1>l&&(n*=l,s*=l)}y.width=n,y.height=s}else y.width=i.original.width,y.height=i.original.height;if(e(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),y.elems.title.innerHTML=c.title||"",y.elems.counter.innerHTML=o+1+" / "+d,a.resize(y.rescale),y.rescale(),c.image&&c.iframe){if(e(y.elems.box).addClass("iframe"),c.video){var u=j(i.container).hide();t.setTimeout(function(){u.fadeIn(200)},200)}e(i.image).css("cursor","pointer").mouseup(function(t,i){return function(o){e(y.image.container).find(".galleria-videoicon").remove(),o.preventDefault(),i.isIframe=!0,i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:8>b?e(y.image.container).height():"100%"})}}(c,i))}}),e(y.elems.overlay).show().css("visibility","visible"),e(y.elems.box).show()}},w=this._timer={trunk:{},add:function(e,i,o,n){if(e=e||(new Date).getTime(),n=n||!1,this.clear(e),n){var s=i;i=function(){s(),w.add(e,i,o)}}this.trunk[e]=t.setTimeout(i,o)},clear:function(e){var i,o=function(e){t.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)o.call(this,e);else if("undefined"==typeof e)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&o.call(this,i)}};return this},i.prototype={constructor:i,init:function(t,n){if(n=_(n),this._original={target:t,options:n,data:null},this._target=this._dom.target=t.nodeName?t:e(t).get(0),this._original.html=this._target.innerHTML,P.push(this),!this._target)return void i.raise("Target not found",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:o,dummy:o,easing:"galleria",extend:function(){},fullscreenCrop:o,fullscreenDoubleTap:!0,fullscreenTransition:o,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:o,initialTransition:o,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:o,maxVideoSize:o,minScaleRatio:o,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:o,transition:"fade",transitionInitial:o,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,n&&(n.debug===!1&&(d=!1),"number"==typeof n.imageTimeout&&(u=n.imageTimeout),"string"==typeof n.dummy&&(h=n.dummy),"string"==typeof n.theme&&(this._options.theme=n.theme)),e(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),D.length)if(this._options.theme){for(var s=0;s<D.length;s++)if(this._options.theme===D[s].name){this.theme=D[s];
break}}else this.theme=D[0];return"object"==typeof this.theme?this._init():L.push(this),this},_init:function(){var s=this,r=this._options;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(e.extend(!0,r,this.theme.defaults,this._original.options,i.configure.options),r.swipe=function(t){return"enforced"==t?!0:t===!1||"disabled"==t?!1:!!i.TOUCH}(r.swipe),r.swipe&&(r.clicknext=!1,r.imagePan=!1),function(t){return"getContext"in t?void(H=H||{elem:t,context:t.getContext("2d"),cache:{},length:0}):void(t=null)}(n.createElement("canvas")),this.bind(i.DATA,function(){t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(e){var i="devicePixelRatio"in t?t.devicePixelRatio:1,o=m.max(t.screen.width,t.screen.height);1024>o*i&&(e.big=e.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var e=this.$("container");s._options.height<2&&(s._userRatio=s._ratio=s._options.height);var o={width:0,height:0},n=function(){return s.$("stage").height()};F.wait({until:function(){return o=s._getWH(),e.width(o.width).height(o.height),n()&&o.width&&o.height>50},success:function(){s._width=o.width,s._height=o.height,s._ratio=s._ratio||o.height/o.width,i.WEBKIT?t.setTimeout(function(){s._run()},1):s._run()},error:function(){n()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+o.width+"px, height: "+o.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+n()+"px.",!0)},timeout:"number"==typeof this._options.wait?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),F.hide(this.$("counter").append(this.get("current"),n.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),F.hide(s.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||e.each(new Array(2),function(t){var o=new i.Picture;e(o.container).css({position:"absolute",top:0,left:0}).prepend(s._layers[t]=e(F.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),s.$("images").append(o.container),s._controls[t]=o;var n=new i.Picture;n.isIframe=!0,e(n.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(o.container),s._controls.frames[t]=n}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),r.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(t){s.pause().show(t)},oncomplete:function(t){var i=m.max(0,m.min(parseInt(t,10),s.getDataLength()-1)),o=s.getData(i);e(s._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),o&&(s.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),s._options.carousel&&s._options.carouselFollow&&s._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(){var i=s.getData();if(i){if(i.iframe){s.isPlaying()&&s.pause();var n=s._controls.frames[s._active],a=s._stageWidth,r=s._stageHeight;if(e(n.container).find("iframe").length)return;return e(n.container).css({width:a,height:r,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){n.load(i.iframe+(i.video?"&autoplay=1":""),{width:a,height:r},function(t){s.$("container").addClass("videoplay"),t.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:i.video?s._options.maxVideoSize:o})})},100)}if(i.link)if(s._options.popupLinks){t.open(i.link,"_blank")}else t.location.href=i.link;else;}}),this.bind(i.IMAGE,function(t){s.setCounter(t.index),s.setInfo(t.index);var i=this.getNext(),o=this.getPrev(),n=[o,i];n.push(this.getNext(i),this.getPrev(o),s._controls.slides.length-1);var a=[];e.each(n,function(t,i){-1==e.inArray(i,a)&&a.push(i)}),e.each(a,function(t,i){var o=s.getData(i),n=s._controls.slides[i],a=s.isFullscreen()&&o.big?o.big:o.image||o.iframe;o.iframe&&!o.image&&(n.isIframe=!0),n.ready||s._controls.slides[i].load(a,function(t){t.isIframe||e(t.image).css("visibility","hidden"),s._scaleImage(t,{complete:function(t){t.isIframe||e(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(){r.pauseOnInteraction&&s.pause();var t=/right/.test(this.className)?"next":"prev";s[t]()}).on("click",function(t){t.preventDefault(),(r.clicknext||r.swipe)&&t.stopPropagation()}),e.each(["info","counter","image-nav"],function(t,e){r["show"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,"")]===!1&&F.moveOut(s.get(e.toLowerCase()))}),this.load(),r.keepSource||b||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),r.carousel){var l=0,c=r.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++l==this.getDataLength()&&"number"==typeof c&&c>0&&this._carousel.follow(c)})}return r.responsive&&a.on("resize",function(){s.isFullscreen()||s.resize()}),r.fullscreenDoubleTap&&this.$("stage").on("touchstart",function(){var t,e,i,o,n,a,r=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return s.$("stage").on("touchmove",function(){t=0}),function(l){if(!/(-left|-right)/.test(l.target.className)){if(a=F.timestamp(),e=r(l).pageX,i=r(l).pageY,l.originalEvent.touches.length<2&&300>a-t&&20>e-o&&20>i-n)return s.toggleFullscreen(),void l.preventDefault();t=a,o=e,n=i}}}()),e.each(i.on.binds,function(t,i){-1==e.inArray(i.hash,s._binds)&&s.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,F.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,F.array(arguments)),this},_getWH:function(){var t,i=this.$("container"),o=this.$("target"),n=this,s={};return e.each(["width","height"],function(e,a){n._options[a]&&"number"==typeof n._options[a]?s[a]=n._options[a]:(t=[F.parseValue(i.css(a)),F.parseValue(o.css(a)),i[a](),o[a]()],n["_"+a]||t.splice(t.length,F.parseValue(i.css("min-"+a)),F.parseValue(o.css("min-"+a))),s[a]=m.max.apply(m,t))}),n._userRatio&&(s.height=s.width*n._userRatio),s},_createThumbnails:function(o){this.get("total").innerHTML=this.getDataLength();var s,a,r,l,c=this,d=this._options,u=o?this._data.length-o.length:0,h=u,p=[],f=0,g=8>b?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",m=function(){var t=c.$("thumbnails").find(".active");return t.length?t.find("img").attr("src"):!1}(),v="string"==typeof d.thumbnails?d.thumbnails.toLowerCase():null,y=function(t){return n.defaultView&&n.defaultView.getComputedStyle?n.defaultView.getComputedStyle(a.container,null)[t]:l.css(t)},w=function(t,o,n){return function(){e(n).append(t),c.trigger({type:i.THUMBNAIL,thumbTarget:t,index:o,galleriaData:c.getData(o)})}},T=function(t){d.pauseOnInteraction&&c.pause();var i=e(t.currentTarget).data("index");c.getIndex()!==i&&c.show(i),t.preventDefault()},k=function(t,o){e(t.container).css("visibility","visible"),c.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:c.getData(t.data.order)}),"function"==typeof o&&o.call(c,t)},x=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:d.thumbCrop,margin:d.thumbMargin,canvas:d.useCanvas,position:d.thumbPosition,complete:function(t){{var o,n,s=["left","top"],a=["Width","Height"];c.getData(t.index)}e.each(a,function(i,a){o=a.toLowerCase(),(d.thumbCrop!==!0||d.thumbCrop===o)&&(n={},n[o]=t[o],e(t.container).css(n),n={},n[s[i]]=0,e(t.image).css(n)),t["outer"+a]=e(t.container)["outer"+a](!0)}),F.toggleQuality(t.image,d.thumbQuality===!0||"auto"===d.thumbQuality&&t.original.width<3*t.width),d.thumbDisplayOrder&&!t.lazy?e.each(p,function(t,e){return t===f&&e.ready&&!e.displayed?(f++,e.displayed=!0,void k(e,i)):void 0}):k(t,i)}})};for(o||(this._thumbnails=[],this.$("thumbnails").empty());this._data[u];u++)r=this._data[u],s=r.thumb||r.image,d.thumbnails!==!0&&"lazy"!=v||!r.thumb&&!r.image?r.iframe&&null!==v||"empty"===v||"numbers"===v?(a={container:F.create("galleria-image"),image:F.create("img","span"),ready:!0,data:{order:u}},"numbers"===v&&e(a.image).text(u+1),r.iframe&&e(a.image).addClass("iframe"),this.$("thumbnails").append(a.container),t.setTimeout(w(a.image,u,a.container),50+20*u)):a={container:null,image:null}:(a=new i.Picture(u),a.index=u,a.displayed=!1,a.lazy=!1,a.video=!1,this.$("thumbnails").append(a.container),l=e(a.container),l.css("visibility","hidden"),a.data={width:F.parseValue(y("width")),height:F.parseValue(y("height")),order:u,src:s},l.css(d.thumbCrop!==!0?{width:"auto",height:"auto"}:{width:a.data.width,height:a.data.height}),"lazy"==v?(l.addClass("lazy"),a.lazy=!0,a.load(g,{height:a.data.height,width:a.data.width})):a.load(s,x),"all"===d.preload&&a.preload(r.image)),e(a.container).add(d.keepSource&&d.linkSourceImages?r.original:null).data("index",u).on(d.thumbEventType,T).data("thumbload",x),m===s&&e(a.container).addClass("active"),this._thumbnails.push(a);return p=this._thumbnails.slice(h),this},lazyLoad:function(t,i){var o=t.constructor==Array?t:[t],n=this,s=0;return e.each(o,function(t,a){if(!(a>n._thumbnails.length-1)){var r=n._thumbnails[a],l=r.data,c=function(){++s==o.length&&"function"==typeof i&&i.call(n)},d=e(r.container).data("thumbload");d&&(r.video?d.call(n,r,c):r.load(l.src,function(t){d.call(n,t,c)}))}}),this},lazyLoadChunks:function(e,i){var o=this.getDataLength(),n=0,s=0,a=[],r=[],l=this;for(i=i||0;o>n;n++)r.push(n),(++s==e||n==o-1)&&(a.push(r),s=0,r=[]);var c=function(e){var o=a.shift();o&&t.setTimeout(function(){l.lazyLoad(o,function(){c(!0)})},i&&e?i:0)};return c(!1),this},_run:function(){var n=this;n._createThumbnails(),F.wait({timeout:1e4,until:function(){return i.OPERA&&n.$("stage").css("display","inline-block"),n._stageWidth=n.$("stage").width(),n._stageHeight=n.$("stage").height(),n._stageWidth&&n._stageHeight>50},success:function(){if(O.push(n),n._options.swipe){var s=n.$("images").width(n.getDataLength()*n._stageWidth);e.each(new Array(n.getDataLength()),function(t){var o=new i.Picture,a=n.getData(t);e(o.container).css({position:"absolute",top:0,left:n._stageWidth*t}).prepend(n._layers[t]=e(F.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(s),a.video&&j(o.container),n._controls.slides.push(o);var r=new i.Picture;r.isIframe=!0,e(r.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(o.container),n._controls.frames.push(r)}),n.finger.setup()}return F.show(n.get("counter")),n._options.carousel&&n._carousel.bindControls(),n._options.autoplay&&(n.pause(),"number"==typeof n._options.autoplay&&(n._playtime=n._options.autoplay),n._playing=!0),n._firstrun?(n._options.autoplay&&n.trigger(i.PLAY),void("number"==typeof n._options.show&&n.show(n._options.show))):(n._firstrun=!0,i.History&&i.History.change(function(e){isNaN(e)?t.history.go(-1):n.show(e,o,!0)}),n.trigger(i.READY),n.theme.init.call(n,n._options),e.each(i.ready.callbacks,function(t,e){"function"==typeof e&&e.call(n,n._options)}),n._options.extend.call(n,n._options),/^[0-9]{1,4}$/.test(f)&&i.History?n.show(f,o,!0):n._data[n._options.show]&&n.show(n._options.show),void(n._options.autoplay&&n.trigger(i.PLAY)))},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+n._stageWidth+"px, height: "+n._stageHeight+"px.",!0)}})},load:function(t,o,n){var s=this,a=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof o&&(n=o,o=null),t=t||a.dataSource,o=o||a.dataSelector,n=n||a.dataConfig,e.isPlainObject(t)&&(t=[t]),e.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(o+=",.video,.iframe",e(t).find(o).each(function(t,i){i=e(i);var o={},a=i.parent(),r=a.attr("href"),l=a.attr("rel");r&&("IMG"==i[0].nodeName||i.hasClass("video"))&&I(r)?o.video=r:r&&i.hasClass("iframe")?o.iframe=r:o.image=r,l&&(o.big=l),o.imagesrcset=a.data("srcset"),o.imagesizes=a.data("sizes"),o.thumbsizes=i.attr("sizes"),o.thumbsrcset=i.attr("srcset"),e.each("big bigsrcset bigsizes title description link layer image imagesrcset imagesizes".split(" "),function(t,e){i.data(e)&&(o[e]=i.data(e).toString())}),i.data("srcset")&&(o.imagesrcset=i.data("srcset")),i.data("sizes")&&(o.imagesizes=i.data("sizes")),o.big||(o.big=o.image,o.bigsrcset=o.imagesrcset,o.bigsizes=o.imagesizes),s._data.push(e.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},o,n(i)))})),"function"==typeof a.dataSort?l.sort.call(this._data,a.dataSort):"random"==a.dataSort&&this._data.sort(function(){return m.round(m.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var i,n=this,s=!1,a=function(){var i=!0;e.each(n._data,function(t,e){return e.loading?(i=!1,!1):void 0}),i&&!s&&(s=!0,t.call(n))};return e.each(this._data,function(t,s){if(i=n._data[t],e.each("big image thumb".split(" "),function(t,e){s[e]&&(s[e]=new String(s[e]),s[e].srcset=s[e+"srcset"],s[e].sizes=s[e+"sizes"])}),"thumb"in s==!1&&(i.thumb=s.image),s.big||(i.big=s.image),"video"in s){var r=I(s.video);r&&(i.iframe=new A(r.provider,r.id).embed()+function(){if("object"==typeof n._options[r.provider]){var t="?",i=[];return e.each(n._options[r.provider],function(t,e){i.push(t+"="+e)}),"youtube"==r.provider&&(i=["wmode=opaque"].concat(i)),t+i.join("&")}return""}(),i.thumb&&i.image||e.each(["thumb","image"],function(t,e){if("image"==e&&!n._options.videoPoster)return void(i.image=o);var s=new A(r.provider,r.id);i[e]||(i.loading=!0,s.getMedia(e,function(t,e){return function(i){t[e]=i,"image"!=e||t.big||(t.big=t.image),delete t.loading,a()}}(i,e)))}))}}),a(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),F.removeFromArray(P,this),F.removeFromArray(O,this),C._inst=[],void 0!==i._waiters&&i._waiters.length&&e.each(i._waiters,function(e,i){i&&t.clearTimeout(i)}),this},splice:function(){var e=this,i=F.array(arguments);return t.setTimeout(function(){l.splice.apply(e._data,i),e._parseData(function(){e._createThumbnails()})},2),e},push:function(){var e=this,i=F.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),t.setTimeout(function(){l.push.apply(e._data,i),e._parseData(function(){e._createThumbnails(i)})},2),e},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(t,e){return t=$(t),this.$("container").on(t,this.proxy(e)),this},unbind:function(t){return t=$(t),this.$("container").off(t),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:$(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,F.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,F.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,F.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,F.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,F.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,F.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,F.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,F.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,F.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,F.array(arguments)),this},hasVariation:function(t){return e.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:o},getActiveThumb:function(){return this._thumbnails[this._active].image||o},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=e(t||this.getActiveImage());var i=this,o=t.width()/2,n=t.height()/2,s=parseInt(t.css("left"),10),a=parseInt(t.css("top"),10),r=s||0,l=a||0,c=0,d=0,u=!1,h=F.timestamp(),p=0,f=0,g=function(e,i,o){if(e>0&&(f=m.round(m.max(-1*e,m.min(0,i))),p!==f))if(p=f,8===b)t.parent()["scroll"+o](-1*f);else{var n={};n[o.toLowerCase()]=f,t.css(n)}},v=function(t){F.timestamp()-h<50||(u=!0,o=i.getMousePosition(t).x,n=i.getMousePosition(t).y)},y=function(){u&&(c=t.width()-i._stageWidth,d=t.height()-i._stageHeight,s=o/i._stageWidth*c*-1,a=n/i._stageHeight*d*-1,r+=(s-r)/i._options.imagePanSmoothness,l+=(a-l)/i._options.imagePanSmoothness,g(d,l,"Top"),g(c,r,"Left"))};return 8===b&&(t.parent().scrollTop(-1*l).scrollLeft(-1*r),t.css({top:0,left:0})),this.$("stage").off("mousemove",v).on("mousemove",v),this.addTimer("pan"+i._id,y,50,!0),this}},proxy:function(t,e){return"function"!=typeof t?v:(e=e||this,function(){return t.apply(e,F.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return e.each(F.array(arguments),function(e,i){t[i]=F.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,F.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,F.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(){return this.$(F.array(arguments).join(",")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive()){var o,n=function(t){e(t.container).children(":first").css({top:m.max(0,F.parseValue(t.image.style.top)),left:m.max(0,F.parseValue(t.image.style.left)),width:F.parseValue(t.image.width),height:F.parseValue(t.image.height)})};return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?"function"==typeof i.complete?(o=i.complete,i.complete=function(){o.call(t,t),n(t)}):i.complete=n:e(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){"function"==typeof t&&(i=t,t=o),t=e.extend({width:0,height:0},t);var n=this,s=this.$("container");return e.each(t,function(e,i){i||(s[e]("auto"),t[e]=n._getWH()[e])}),e.each(t,function(t,e){s[t](e)}),this.rescale(i)},rescale:function(t,n,s){var a=this;"function"==typeof t&&(s=t,t=o);var r=function(){a._stageWidth=t||a.$("stage").width(),a._stageHeight=n||a.$("stage").height(),a._options.swipe?(e.each(a._controls.slides,function(t,i){a._scaleImage(i),e(i.container).css("left",a._stageWidth*t)}),a.$("images").css("width",a._stageWidth*a.getDataLength())):a._scaleImage(),a._options.carousel&&a.updateCarousel();var o=a._controls.frames[a._controls.active];o&&a._controls.frames[a._controls.active].scale({width:a._stageWidth,height:a._stageHeight,iframelimit:a._options.maxVideoSize}),a.trigger(i.RESCALE),"function"==typeof s&&s.call(a)};return r.call(a),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,o,n=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,o=this.getData(n),t.preload(this.isFullscreen()&&o.big?o.big:o.image),n=this.getNext(n)}catch(s){}}},show:function(o,n,s){var a=this._options.swipe;if(a||!(this._queue.length>3||o===!1||!this._options.queue&&this._queue.stalled)){if(o=m.max(0,m.min(parseInt(o,10),this.getDataLength()-1)),n="undefined"!=typeof n?!!n:o<this.getIndex(),s=s||!1,!s&&i.History)return void i.History.set(o.toString());if(this.finger&&o!==this._active&&(this.finger.to=-(o*this.finger.width),this.finger.index=o),this._active=o,a){var r=this.getData(o),c=this;if(!r)return;var d=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,u=this._controls.slides[o],h=u.isCached(d),p=this._thumbnails[o],f={cached:h,index:o,rewind:n,imageTarget:u.image,thumbTarget:p.image,galleriaData:r};this.trigger(e.extend(f,{type:i.LOADSTART})),c.$("container").removeClass("videoplay");var g=function(){c._layers[o].innerHTML=c.getData().layer||"",c.trigger(e.extend(f,{type:i.LOADFINISH})),c._playCheck()};c._preload(),t.setTimeout(function(){u.ready&&e(u.image).attr("src")==d?(c.trigger(e.extend(f,{type:i.IMAGE})),g()):(r.iframe&&!r.image&&(u.isIframe=!0),u.load(d,function(t){f.imageTarget=t.image,c._scaleImage(t,g).trigger(e.extend(f,{type:i.IMAGE})),g()}))},100)}else l.push.call(this._queue,{index:o,rewind:n}),this._queue.stalled||this._show();return this}},_show:function(){var n=this,s=this._queue[0],a=this.getData(s.index);if(a){var r=this.isFullscreen()&&a.big?a.big:a.image||a.iframe,c=this._controls.getActive(),d=this._controls.getNext(),u=d.isCached(r),h=this._thumbnails[s.index],p=function(){e(d.image).trigger("mouseup")};n.$("container").toggleClass("iframe",!!a.isIframe).removeClass("videoplay");var f=function(s,a,r,c,d){return function(){var u;N.active=!1,F.toggleQuality(a.image,n._options.imageQuality),n._layers[n._controls.active].innerHTML="",e(r.container).css({zIndex:0,opacity:0}).show(),e(r.container).find("iframe, .galleria-videoicon").remove(),e(n._controls.frames[n._controls.active].container).hide(),e(a.container).css({zIndex:1,left:0,top:0}).show(),n._controls.swap(),n._options.imagePan&&n.addPan(a.image),(s.iframe&&s.image||s.link||n._options.lightbox||n._options.clicknext)&&e(a.image).css({cursor:"pointer"}).on("mouseup",function(a){if(!("number"==typeof a.which&&a.which>1)){if(s.iframe){n.isPlaying()&&n.pause();var r=n._controls.frames[n._controls.active],l=n._stageWidth,c=n._stageHeight;return e(r.container).css({width:l,height:c,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){r.load(s.iframe+(s.video?"&autoplay=1":""),{width:l,height:c},function(t){n.$("container").addClass("videoplay"),t.scale({width:n._stageWidth,height:n._stageHeight,iframelimit:s.video?n._options.maxVideoSize:o})})},100)}return n._options.clicknext&&!i.TOUCH?(n._options.pauseOnInteraction&&n.pause(),void n.next()):s.link?void(n._options.popupLinks?u=t.open(s.link,"_blank"):t.location.href=s.link):void(n._options.lightbox&&n.openLightbox())}}),n._playCheck(),n.trigger({type:i.IMAGE,index:c.index,imageTarget:a.image,thumbTarget:d.image,galleriaData:s}),l.shift.call(n._queue),n._queue.stalled=!1,n._queue.length&&n._show()}}(a,d,c,s,h);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(s.index),n._preload(),F.show(d.container),d.isIframe=a.iframe&&!a.image,e(n._thumbnails[s.index].container).addClass("active").siblings(".active").removeClass("active"),n.trigger({type:i.LOADSTART,cached:u,index:s.index,rewind:s.rewind,imageTarget:d.image,thumbTarget:h.image,galleriaData:a}),n._queue.stalled=!0,d.load(r,function(t){var r=e(n._layers[1-n._controls.active]).html(a.layer||"").hide();n._scaleImage(t,{complete:function(t){"image"in c&&F.toggleQuality(c.image,!1),F.toggleQuality(t.image,!1),n.removePan(),n.setInfo(s.index),n.setCounter(s.index),a.layer&&(r.show(),(a.iframe&&a.image||a.link||n._options.lightbox||n._options.clicknext)&&r.css("cursor","pointer").off("mouseup").mouseup(p)),a.video&&a.image&&j(t.container);var l=n._options.transition;if(e.each({initial:null===c.image,touch:i.TOUCH,fullscreen:n.isFullscreen()},function(t,e){return e&&n._options[t+"Transition"]!==o?(l=n._options[t+"Transition"],!1):void 0}),l in N.effects==!1)f();else{var d={prev:c.container,next:t.container,rewind:s.rewind,speed:n._options.transitionSpeed||400};N.active=!0,N.init.call(n,l,d,f)}n.trigger({type:i.LOADFINISH,cached:u,index:s.index,rewind:s.rewind,imageTarget:t.image,thumbTarget:n._thumbnails[s.index].image,galleriaData:n.getData(s.index)})}})})}},getNext:function(t){return t="number"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t="number"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return"undefined"==typeof t?this._options:this._options[t]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,o=20,n=F.timestamp(),s="play"+this._id;if(this._playing){this.clearTimer(s);var a=function(){return e=F.timestamp()-n,e>=t._playtime&&t._playing?(t.clearTimer(s),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:m.ceil(e/t._playtime*100),seconds:m.floor(e/1e3),milliseconds:e}),t.addTimer(s,a,o)))};t.addTimer(s,a,o)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if("number"==typeof t?t++:"undefined"==typeof t&&(t=this.getIndex()+1),this.get("current").innerHTML=t,b){var e=this.$("counter"),i=e.css("opacity");1===parseInt(i,10)?F.removeAlpha(e[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,o=this.getData(t);return e.each(["title","description"],function(t,e){var n=i.$("info-"+e);o[e]?n[o[e].length?"show":"hide"]().html(o[e]):n.empty().hide()}),this},hasInfo:function(t){var e,i="title description".split(" ");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(t){var i=this,o=[];e.each(t.split(","),function(t,n){n=e.trim(n),i.get(n)&&o.push(n)});var n=e(i.get(o.shift()));return e.each(o,function(t,e){n=n.add(i.get(e))}),n},$:function(){return this.jQuery.apply(this,F.array(arguments))}},e.each(S,function(t,e){var o=/_/.test(e)?e.replace(/_/g,""):e;i[e.toUpperCase()]="galleria."+o}),e.extend(i,{IE9:9===b,IE8:8===b,IE7:7===b,IE6:6===b,IE:b,WEBKIT:/webkit/.test(p),CHROME:/chrome/.test(p),SAFARI:/safari/.test(p)&&!/chrome/.test(p),QUIRK:b&&n.compatMode&&"BackCompat"===n.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(p),IPAD:/ipad/.test(p),ANDROID:/android/.test(p),TOUCH:"ontouchstart"in n&&w}),i.addTheme=function(o){o.name||i.raise("No theme name specified"),(!o.version||parseInt(10*i.version)>parseInt(10*o.version))&&i.raise("This version of Galleria requires "+o.name+" theme version "+parseInt(10*i.version)/10+" or later",!0),o.defaults="object"!=typeof o.defaults?{}:_(o.defaults);var n,s,a=!1;return"string"==typeof o.css?(e("link").each(function(t,e){return n=new RegExp(o.css),n.test(e.href)?(a=!0,M(o),!1):void 0}),a||e(function(){var r=0,l=function(){e("script").each(function(e,i){n=new RegExp("galleria\\."+o.name.toLowerCase()+"\\."),s=new RegExp("galleria\\.io\\/theme\\/"+o.name.toLowerCase()+"\\/(\\d*\\.*)?(\\d*\\.*)?(\\d*\\/)?js"),(n.test(i.src)||s.test(i.src))&&(a=i.src.replace(/[^\/]*$/,"")+o.css,t.setTimeout(function(){F.loadCSS(a,"galleria-theme-"+o.name,function(){M(o)})},1))}),a||(r++>5?i.raise("No theme CSS loaded"):t.setTimeout(l,500))};l()})):M(o),o},i.loadTheme=function(o){if(!e("script").filter(function(){return e(this).attr("src")==o}).length){var n,s=!1;return e(t).on("load",function(){s||(n=t.setTimeout(function(){s||i.raise("Galleria had problems loading theme at "+o+". Please check theme path or load manually.",!0)},2e4))}),F.loadScript(o,function(){s=!0,t.clearTimeout(n)}),i}},i.get=function(t){return P[t]?P[t]:"number"!=typeof t?P:void i.raise("Gallery index "+t+" not found")},i.configure=function(t,o){var n={};return"string"==typeof t&&o?(n[t]=o,t=n):e.extend(n,t),i.configure.options=n,e.each(i.get(),function(t,e){e.setOptions(n)}),i},i.configure.options={},i.on=function(t,o){if(t){o=o||v;var n=t+o.toString().replace(/\s/g,"")+F.timestamp();return e.each(i.get(),function(e,i){i._binds.push(n),i.bind(t,o)}),i.on.binds.push({type:t,callback:o,hash:n}),i}},i.on.binds=[],i.run=function(t,o){return e.isFunction(o)&&(o={extend:o}),e(t||"#galleria").galleria(o),i},i.addTransition=function(t,e){return N.effects[t]=e,i},i.utils=F,i.log=function(){var i=F.array(arguments);if(!("console"in t&&"log"in t.console))return t.alert(i.join("<br>"));try{return t.console.log.apply(t.console,i)}catch(o){e.each(i,function(){t.console.log(this)})}},i.ready=function(t){return"function"!=typeof t?i:(e.each(O,function(e,i){t.call(i,i._options)}),i.ready.callbacks.push(t),i)},i.ready.callbacks=[],i.raise=function(t,i){var o=i?"Fatal error":"Error",n={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},s=function(t){var s='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+o+": </strong>":"")+t+"</div>";e.each(P,function(){var t=this.$("errors"),e=this.$("target");t.length||(e.css("position","relative"),t=this.addElement("errors").appendChild("target","errors").$("errors").css(n)),t.append(s)}),P.length||e("<div>").css(e.extend(n,{position:"fixed"})).append(s).appendTo(T().body)};if(d){if(s(t),i)throw new Error(o+": "+t)}else if(i){if(E)return;E=!0,i=!1,s("Gallery could not load.")}},i.version=c,i.getLoadedThemes=function(){return e.map(D,function(t){return t.name})},i.requires=function(t,e){return e=e||"You need to upgrade Galleria to version "+t+" to use one or more components.",i.version<t&&i.raise(e,!0),i},i.Picture=function(t){this.id=t||null,this.image=null,this.container=F.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){F.show(this.image)},hide:function(){F.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]
},preload:function(t){var i=e(new Image).on("load",function(t,e){return function(){e[t]=t}}(t,this.cache));t.srcset&&i.attr("srcset",t.srcset),t.sizes&&i.attr("sizes",t.sizes),i.attr("src",t)},load:function(o,n,s){if("function"==typeof n&&(s=n,n=null),this.isIframe){var a="if"+(new Date).getTime(),r=this.image=e("<iframe>",{src:o,frameborder:0,id:a,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return n&&e(r).css(n),e(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),e("#"+a).on("load",function(i,o){return function(){t.setTimeout(function(){e(i.image).css("visibility","visible"),"function"==typeof o&&o.call(i,i)},10)}}(this,s)),this.container}this.image=new Image,i.IE8&&e(this.image).css("filter","inherit"),i.IE||i.CHROME||i.SAFARI||e(this.image).css("image-rendering","optimizequality");var l=!1,c=!1,d=e(this.container),u=e(this.image),p=function(){l?h?e(this).attr("src",h):i.raise("Image not found: "+o):(l=!0,t.setTimeout(function(t,e){return function(){t.attr("src",e+(e.indexOf("?")>-1?"&":"?")+F.timestamp())}}(e(this),o),50))},f=function(o,s,a){return function(){var r=function(){e(this).off("load"),o.original=n||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),d.append(this),o.cache[a]=a,"function"==typeof s&&t.setTimeout(function(){s.call(o,o)},1)};this.width&&this.height?r.call(this):!function(t){F.wait({until:function(){return t.width&&t.height},success:function(){r.call(t)},error:function(){c?i.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(e(new Image).on("load",f).attr("src",t.src),c=!0)},timeout:100})}(this)}}(this,s,o);return d.find("iframe,img").remove(),u.css("display","block"),F.hide(this.image),e.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){u.css(e,/min/.test(e)?"0":"none")}),u.on("load",f).on("error",p),o.srcset&&u.attr("srcset",o.srcset),o.sizes&&u.attr("sizes",o.sizes),u.attr("src",o),this.container},scale:function(t){var n=this;if(t=e.extend({width:0,height:0,min:o,max:o,margin:0,complete:v,position:"center",crop:!1,canvas:!1,iframelimit:o},t),this.isIframe){var s,a,r=t.width,l=t.height;if(t.iframelimit){var c=m.min(t.iframelimit/r,t.iframelimit/l);1>c?(s=r*c,a=l*c,e(this.image).css({top:l/2-a/2,left:r/2-s/2,position:"absolute"})):e(this.image).css({top:0,left:0})}e(this.image).width(s||r).height(a||l).removeAttr("width").removeAttr("height"),e(this.container).width(r).height(l),t.complete.call(n,n);try{this.image.contentWindow&&e(this.image.contentWindow).trigger("resize")}catch(d){}return this.container}if(!this.image)return this.container;var u,h,p,f=e(n.container);return F.wait({until:function(){return u=t.width||f.width()||F.parseValue(f.css("width")),h=t.height||f.height()||F.parseValue(f.css("height")),u&&h},success:function(){var i=(u-2*t.margin)/n.original.width,o=(h-2*t.margin)/n.original.height,s=m.min(i,o),a=m.max(i,o),r={"true":a,width:i,height:o,"false":s,landscape:n.original.width>n.original.height?a:s,portrait:n.original.width<n.original.height?a:s},l=r[t.crop.toString()],c="";t.max&&(l=m.min(t.max,l)),t.min&&(l=m.max(t.min,l)),e.each(["width","height"],function(t,i){e(n.image)[i](n[i]=n.image[i]=m.round(n.original[i]*l))}),e(n.container).width(u).height(h),t.canvas&&H&&(H.elem.width=n.width,H.elem.height=n.height,c=n.image.src+":"+n.width+"x"+n.height,n.image.src=H.cache[c]||function(t){H.context.drawImage(n.image,0,0,n.original.width*l,n.original.height*l);try{return p=H.elem.toDataURL(),H.length+=p.length,H.cache[t]=p,p}catch(e){return n.image.src}}(c));var d={},f={},g=function(t,i,o){var s=0;if(/\%/.test(t)){var a=parseInt(t,10)/100,r=n.image[i]||e(n.image)[i]();s=m.ceil(-1*r*a+o*a)}else s=F.parseValue(t);return s},v={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(t.position.toLowerCase().split(" "),function(t,e){"center"===e&&(e="50%"),d[t?"top":"left"]=e}),e.each(d,function(t,i){v.hasOwnProperty(i)&&e.extend(f,v[i])}),d=d.top?e.extend(d,f):f,d=e.extend({top:"50%",left:"50%"},d),e(n.image).css({position:"absolute",top:g(d.top,"height",h),left:g(d.left,"width",u)}),n.show(),n.ready=!0,t.complete.call(n,n)},error:function(){i.raise("Could not scale image: "+n.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(t,e,i,o,n){return(e/=n/2)<1?o/2*e*e*e+i:o/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,o,n){return o*(e/=n)*e+i},galleriaOut:function(t,e,i,o,n){return-o*(e/=n)*(e-2)+i}}),i.Finger=function(){var o=(m.abs,i.HAS3D=function(){var t,i,o=n.createElement("p"),s=["webkit","O","ms","Moz",""],a=0,r="transform";for(T().html.insertBefore(o,null);s[a];a++)i=s[a]?s[a]+"Transform":r,void 0!==o.style[i]&&(o.style[i]="translate3d(1px,1px,1px)",t=e(o).css(s[a]?"-"+s[a].toLowerCase()+"-"+r:r));return T().html.removeChild(o),void 0!==t&&t.length>0&&"none"!==t}()),a=function(){var e="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+e]||t["moz"+e]||t["o"+e]||t["ms"+e]||function(e){t.setTimeout(e,1e3/60)}}(),r=function(i,n){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,o,n){return-o*((e=e/n-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,o,n){return o*((e=e/n-1)*e*e*e*e+1)+i},i.children.length){var s=this;e.extend(this.config,n),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,o||(this.child.style.position="absolute",this.elem.style.position="relative"),e.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(t,e){s[e]=function(t){return function(){t.apply(s,arguments)}}(s[e])}),this.setX=function(){var t=s.child.style;return o?void(t.MozTransform=t.webkitTransform=t.transform="translate3d("+s.pos+"px,0,0)"):void(t.left=s.pos+"px")},e(i).on("touchstart",this.ontouchstart),e(t).on("resize",this.setup),e(t).on("orientationchange",this.setup),this.setup(),function r(){a(r),s.loop.call(s)}()}};return r.prototype={constructor:r,setup:function(){this.width=e(this.elem).width(),this.length=m.ceil(e(this.child).width()/this.width),0!==this.index&&(this.index=m.max(0,m.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,s.on("touchmove",this.ontouchmove),s.on("touchend",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||m.abs(this.deltaX)<m.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?m.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(){this.touching=!1;var t=+new Date-this.start.time<250&&m.abs(this.deltaX)>40||m.abs(this.deltaX)>this.width/2,e=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(t&&!e?this.deltaX<0?1:-1:0)),s.off("touchmove",this.ontouchmove),s.off("touchend",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=m.max(.5,m.min(1.5,m.abs(t/this.width)))),this.touching||m.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,o=this.config.duration*this.anim.factor;if(i>o||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,o)}this.setX()}},r}(),e.fn.galleria=function(t){var o=this.selector;return e(this).length?this.each(function(){e.data(this,"galleria")&&(e.data(this,"galleria").destroy(),e(this).find("*").hide()),e.data(this,"galleria",(new i).init(this,t))}):(e(function(){e(o).length?e(o).galleria(t):i.utils.wait({until:function(){return e(o).length},success:function(){e(o).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+o+'".')},timeout:5e3})}),this)},i});
//# sourceMappingURL=galleria-1.6.1.min.js.map